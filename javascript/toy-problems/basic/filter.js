// rewrite filter as a standalone function
